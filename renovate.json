{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended"
  ],
  "separateMajorMinor": false,
  "separateMinorPatch": true,
  "ignoreTests": true,
  "prConcurrentLimit": 5,
  "branchConcurrentLimit": 10,
  "labels": [
    "dependencies"
  ],
  "assignees": [
    "fslef"
  ],
  "packageRules": [
    {
      "description": "Group all npm dependencies together",
      "matchManagers": [
        "npm"
      ],
      "groupName": "npm dependencies",
      "matchUpdateTypes": [
        "major",
        "minor"
      ]
    },
    {
      "description": "PowerShell modules in RequiredModules.psd1",
      "matchManagers": [
        "custom.regex"
      ],
      "matchFileNames": [
        "RequiredModules.psd1"
      ],
      "groupName": "PowerShell modules",
      "matchUpdateTypes": [
        "major",
        "minor"
      ]
    },
    {
      "description": "PowerShell modules in Resolve-Dependency.psd1",
      "matchManagers": [
        "custom.regex"
      ],
      "matchFileNames": [
        "Resolve-Dependency.psd1"
      ],
      "groupName": "PowerShell dependency modules",
      "matchUpdateTypes": [
        "major",
        "minor"
      ]
    },
    {
      "description": "DevContainer Node.js version",
      "matchManagers": [
        "custom.regex"
      ],
      "matchFileNames": [
        ".devcontainer/devcontainer.json"
      ],
      "groupName": "devcontainer dependencies",
      "matchUpdateTypes": [
        "major",
        "minor"
      ]
    }
  ],
  "customManagers": [
    {
      "customType": "regex",
      "description": "Update PowerShell module versions in RequiredModules.psd1",
      "managerFilePatterns": [
        "/^RequiredModules\\.psd1$/"
      ],
      "matchStrings": [
        "\\s+(?<depName>[\\w\\.]+)\\s+=\\s+'(?<currentValue>[^']+)'"
      ],
      "datasourceTemplate": "nuget",
      "registryUrlTemplate": "https://www.powershellgallery.com/api/v2"
    },
    {
      "customType": "regex",
      "description": "Update PowerShell module versions in Resolve-Dependency.psd1",
      "managerFilePatterns": [
        "/^Resolve-Dependency\\.psd1$/"
      ],
      "matchStrings": [
        "(?<depName>PSResourceGetVersion|UsePowerShellGetCompatibilityModuleVersion)\\s+=\\s+'(?<currentValue>[^']+)'"
      ],
      "datasourceTemplate": "nuget",
      "registryUrlTemplate": "https://www.powershellgallery.com/api/v2"
    },
    {
      "customType": "regex",
      "description": "Update Node.js version in devcontainer.json",
      "managerFilePatterns": [
        "/^\\.devcontainer/devcontainer\\.json$/"
      ],
      "matchStrings": [
        "\"image\":\\s*\"node:(?<currentValue>[^\"]+)\""
      ],
      "depNameTemplate": "node",
      "datasourceTemplate": "docker"
    }
  ],
  "npm": {
    "packageRules": [
      {
        "matchUpdateTypes": [
          "major",
          "minor"
        ],
        "matchPackageNames": [
          "vitepress",
          "vitepress-plugin-mermaid",
          "mermaid"
        ]
      }
    ]
  }
}
